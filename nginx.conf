# Moxlite NGINX Configuration - Cache Headers for Images and Static Assets
# Add this to your server block or include it in your nginx.conf

# Cache images for 1 year (31536000 seconds)
location ~* \.(jpg|jpeg|png|gif|webp|avif|svg|ico)$ {
  expires 1y;
  add_header Cache-Control "public, max-age=31536000, immutable";
  add_header Pragma "public";
  add_header Vary "Accept-Encoding";
}

# Cache fonts for 1 year
location ~* \.(woff|woff2|eot|ttf|otf)$ {
  expires 1y;
  add_header Cache-Control "public, max-age=31536000, immutable";
  add_header Pragma "public";
}

# Cache CSS and JavaScript for 30 days
location ~* \.(css|js)$ {
  expires 30d;
  add_header Cache-Control "public, max-age=2592000";
  add_header Pragma "public";
  add_header Vary "Accept-Encoding";
}


location ~* \.(mp4|webm|m3u8|ts)$ {
  expires 30d;
  add_header Cache-Control "public, max-age=2592000";
  add_header Pragma "public";
}

# Don't cache HTML (always fetch fresh)
location ~* \.html?$ {
  expires -1;
  add_header Cache-Control "public, max-age=0, must-revalidate";
  add_header Pragma "public";
}

# Cache JSON for 1 hour
location ~* \.json$ {
  expires 1h;
  add_header Cache-Control "public, max-age=3600";
  add_header Pragma "public";
}

# Gzip compression
gzip on;
gzip_vary on;
gzip_types text/html text/plain text/xml text/css text/javascript application/javascript application/json image/svg+xml;
gzip_min_length 1000;
